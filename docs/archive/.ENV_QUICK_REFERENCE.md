# üìå ENV FILES - QUICK REFERENCE

**Last Updated:** October 23, 2025

---

## Three Files You Need

### 1. `.env` (Local Development - Your Machine)

```bash
# Location: Root directory (never commit)
# Access: Only you can see
# Contains: YOUR REAL SECRETS

OPENAI_API_KEY=sk-your-real-key
ANTHROPIC_API_KEY=sk-ant-your-real-key
STRAPI_API_TOKEN=your-real-token
DATABASE_CLIENT=sqlite
DATABASE_FILENAME=.tmp/data.db
# ... other local settings
```

**Actions:**

- ‚úÖ Create from `.env.example`
- ‚úÖ Add your real API keys
- ‚ùå NEVER commit to git
- ‚úÖ Keep in `.gitignore`

---

### 2. `.env.staging` (Staging Template - For Railway Staging)

```bash
# Location: Root directory (COMMIT THIS)
# Access: Everyone sees it (it's in git)
# Contains: NO SECRETS - only GitHub Secret references

NODE_ENV=staging
NEXT_PUBLIC_STRAPI_API_URL=https://staging-cms.railway.app
STRAPI_API_TOKEN=${STAGING_STRAPI_TOKEN}        # Placeholder
DATABASE_HOST=${STAGING_DB_HOST}                # Placeholder
OPENAI_API_KEY=${STAGING_OPENAI_API_KEY}        # Placeholder
# ... other staging settings
```

**Actions:**

- ‚úÖ Already created ‚úì
- ‚úÖ Commit to git ‚úì
- ‚úÖ GitHub Actions will inject actual secrets at deploy time

---

### 3. `.env.production` (Production Template - For Vercel + Railway)

```bash
# Location: Root directory (COMMIT THIS)
# Access: Everyone sees it (it's in git)
# Contains: NO SECRETS - only GitHub Secret references

NODE_ENV=production
NEXT_PUBLIC_STRAPI_API_URL=https://cms.railway.app
STRAPI_API_TOKEN=${PROD_STRAPI_TOKEN}           # Placeholder
DATABASE_HOST=${PROD_DB_HOST}                   # Placeholder
OPENAI_API_KEY=${PROD_OPENAI_API_KEY}           # Placeholder
# ... other production settings
```

**Actions:**

- ‚úÖ Already created ‚úì
- ‚úÖ Commit to git ‚úì
- ‚úÖ GitHub Actions will inject actual secrets at deploy time

---

## What NOT to Do

‚ùå **NEVER put real API keys in `.env.staging` or `.env.production`**

Why? They're committed to git and everyone can see them!

```bash
# WRONG - Don't do this:
OPENAI_API_KEY=sk-actual-secret-key    # ‚ùå Don't commit real keys

# RIGHT - Do this instead:
OPENAI_API_KEY=${PROD_OPENAI_API_KEY}  # ‚úÖ Reference GitHub Secret
```

---

## GitHub Secrets (Where Real Secrets Live)

**Location:** GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions

**Add these:**

### For Staging:

```
STAGING_STRAPI_TOKEN = your-actual-staging-token
STAGING_DB_PASSWORD = your-staging-db-password
STAGING_OPENAI_API_KEY = sk-staging-key
STAGING_ANTHROPIC_API_KEY = sk-ant-staging-key
```

### For Production:

```
PROD_STRAPI_TOKEN = your-actual-prod-token
PROD_DB_PASSWORD = your-prod-db-password
PROD_OPENAI_API_KEY = sk-prod-key
PROD_ANTHROPIC_API_KEY = sk-ant-prod-key
```

---

## Deployment Flow

```
Local Development
‚îî‚îÄ You use: .env (with YOUR real secrets)
‚îî‚îÄ npm run dev ‚Üí works locally

Git: push origin dev
‚îî‚îÄ GitHub Actions reads: .env.staging + GitHub Secrets
‚îî‚îÄ Injects ACTUAL secrets from GitHub
‚îî‚îÄ Deploys to Railway staging

Git: push origin main
‚îî‚îÄ GitHub Actions reads: .env.production + GitHub Secrets
‚îî‚îÄ Injects ACTUAL secrets from GitHub
‚îî‚îÄ Deploys to Vercel (frontend) + Railway (backend)
```

---

## Vercel Environment Variables

**What TO add to Vercel:**

```
NEXT_PUBLIC_STRAPI_API_URL = https://cms.railway.app
STRAPI_API_TOKEN = (get from GitHub Secrets)
```

**What NOT to add to Vercel:**

```
‚ùå OPENAI_API_KEY         (backend only - needs Railway)
‚ùå ANTHROPIC_API_KEY      (backend only - needs Railway)
‚ùå GOOGLE_API_KEY         (backend only - needs Railway)
‚ùå DATABASE_HOST          (backend only - needs Railway)
‚ùå DATABASE_PASSWORD      (backend only - needs Railway)
‚ùå GCP_PROJECT_ID         (backend only - needs Railway)
```

**Why?** Frontend in Vercel only needs to know where the backend is!

---

## Summary Table

| File              | Location | Commit? | Secrets? | Purpose                                   |
| ----------------- | -------- | ------- | -------- | ----------------------------------------- |
| `.env`            | Root     | ‚ùå NO   | ‚úÖ YES   | Local dev (your secrets)                  |
| `.env.example`    | Root     | ‚úÖ YES  | ‚ùå NO    | Template for new devs                     |
| `.env.staging`    | Root     | ‚úÖ YES  | ‚ùå NO    | Staging template (refs GitHub Secrets)    |
| `.env.production` | Root     | ‚úÖ YES  | ‚ùå NO    | Production template (refs GitHub Secrets) |

---

## Files to DELETE

```bash
rm .env.tier1.production    # Old naming, use .env.production
rm .env.old                 # Backup, not needed
rm .env.local               # Next.js override, not needed
```

---

## One-Minute Setup

```bash
# 1. Delete old files
rm .env.tier1.production .env.old .env.local

# 2. Verify .env has your secrets
cat .env | head -5

# 3. Commit changes
git add -A
git commit -m "chore: clean up env files"

# 4. Push
git push origin feat/test-branch

# 5. Set GitHub Secrets (do this in GitHub web UI)
# Go to: Settings ‚Üí Secrets and variables ‚Üí Actions
# Add all STAGING_* and PROD_* variables

# Done! ‚úÖ
```

---

**Questions?** Read `.ENV_SETUP_GUIDE.md` or `docs/07-BRANCH_SPECIFIC_VARIABLES.md`
