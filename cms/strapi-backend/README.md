# **GLAD Labs: Strapi v5 Headless CMS**

This directory contains the Strapi application that serves as the central headless Content Management System (CMS) for the GLAD Labs project. It provides a structured, API-first backend for all content generated by the AI agents.

---

## **1. Role in the Architecture**

- **Content Hub**: This Strapi instance is the single source of truth for all blog posts, author information, and other related content.
- **API-First**: It exposes a robust GraphQL and REST API that the AI agents use to publish content and that the front-end applications (like the Next.js public site) use to fetch and display content.
- **Admin Panel**: Provides a user-friendly interface for manually reviewing, editing, and managing content if needed.

---

## **2. Key Content Types**

The core data structures are defined within Strapi's Content-Type Builder. The primary content types include:

- **Post**: Represents a single blog article. Fields include `title`, `slug`, `content` (in Markdown), `featured_image`, `author`, `tags`, and `status`.
- **Author**: Represents a content author (can be an AI agent or a human). Fields include `name`, `bio`, and `avatar`.
- **Tag**: Represents a content category or tag.

---

## **3. Getting Started**

### **Prerequisites**

- Node.js (version specified in `package.json`)
- NPM or Yarn

### **Running in Development**

To start the Strapi application with auto-reloading enabled for local development:

```bash
# Using npm
npm run develop

# Or using yarn
yarn develop
```

This will start the server, typically on `http://localhost:1337`. You can access the admin panel at `http://localhost:1337/admin`.

### **Core Scripts**

- `npm run develop`: Start the development server.
- `npm run start`: Start the production server (requires a build first).
- `npm run build`: Build the admin panel for production.
- `npm run strapi`: Access the Strapi command-line interface (CLI) for advanced commands.

---

## **4. Deployment**

This Strapi application is designed to be containerized and deployed on a cloud service like Google Cloud Run or another container-hosting platform.

The deployment process typically involves:

1. Building the Strapi application (`npm run build`).
2. Creating a Docker image.
3. Pushing the image to a container registry (e.g., Google Artifact Registry).
4. Deploying the image to the hosting service, ensuring all necessary environment variables (database credentials, cloud storage keys, etc.) are securely configured.

---

## **5. Customizations**

- **Intervention Endpoint**: A custom controller has been added at `src/api/intervention/` to handle the "INTERVENE" signal from the Oversight Hub. When triggered, it publishes a message to a Google Cloud Pub/Sub topic to activate the agent.
- **GraphQL Plugin**: The GraphQL plugin is installed (`@strapi/plugin-graphql`) to provide a flexible data query language for the frontends.
